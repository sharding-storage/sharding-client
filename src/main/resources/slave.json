{"openapi":"3.0.1","info":{"title":"Sharding Service API","description":"API для шардированного хранилища ключ-значение","version":"1.0.0"},"servers":[{"url":"http://localhost:8084","description":"Generated server url"}],"tags":[{"name":"storage","description":"Доступ к хранилищу ключ-значение"}],"paths":{"/storage/{key}":{"get":{"tags":["storage"],"summary":"Возвращает значение по ключу","description":"Возвращает значение, связанное с данным ключом","operationId":"getValue","parameters":[{"name":"key","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ValueResponse"}}}}}},"put":{"tags":["storage"],"summary":"Устанавливает значение для ключа","description":"Сохраняет значение для данного ключа","operationId":"setValue","parameters":[{"name":"key","in":"path","required":true,"schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/KeyValueRequest"}}},"required":true},"responses":{"200":{"description":"OK"}}}},"/storage/direct":{"post":{"tags":["storage"],"operationId":"migrateDirectly","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MigrationRequest"}}},"required":true},"responses":{"200":{"description":"OK"}}}},"/storage/version":{"get":{"tags":["storage"],"operationId":"getVersion","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/VersionResponse"}}}}}}}},"components":{"schemas":{"KeyValueRequest":{"required":["value"],"type":"object","properties":{"value":{"type":"string","description":"Значение для хранения","example":"new data"},"version":{"type":"integer","format":"int32"}},"description":"Запрос на установку значения для ключа"},"MigrationRequest":{"type":"object","properties":{"targetAddress":{"type":"string"},"startHash":{"type":"integer","format":"int64"},"endHash":{"type":"integer","format":"int64"},"version":{"type":"integer","format":"int32"}}},"ValueResponse":{"type":"object","properties":{"value":{"type":"string","description":"Хранимое значение","example":"sample data"},"version":{"type":"integer","format":"int32"}},"description":"Ответ с хранимым значением"},"VersionResponse":{"type":"object","properties":{"version":{"type":"integer","format":"int32"}}}}}}